{"ast":null,"code":"var _jsxFileName = \"/Users/jangsher/Documents/GitHub/tables/mytable/src/Game3.js\";\nimport React, { component } from \"react\"; //import \"bootstrap/dist/css/bootstrap.css\";\n//import Row from \"./Row\";\n//import \"./App.css\";\n//Row\n\nclass Row extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const cols = [];\n\n    for (var i = 0; i < 3; i++) {\n      var id = this.props.row * 3 + i;\n      var marking = this.props.boardState[id];\n      cols.push( /*#__PURE__*/React.createElement(Column, {\n        key: id + \"-\" + marking,\n        id: id + \"-\" + marking,\n        marking: marking,\n        onNewMove: this.props.onNewMove,\n        active: this.props.active,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 9\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"border-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 12\n      }\n    }, cols);\n  }\n\n} //Column\n\n\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711]\n};\n\nclass Column extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleNewMove = this.handleNewMove.bind(this);\n  }\n\n  handleNewMove(e) {\n    if (!this.props.active) {\n      document.querySelector(\"#message1\").style.display = \"none\";\n      document.querySelector(\"#message2\").innerHTML = \"Game is already over! Reset if you want to play again.\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      return false;\n    } else if (this.props.marking == 2) this.props.onNewMove(parseInt(e.target.id));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"game\",\n      onClick: this.handleNewMove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: symbolsMap[this.props.marking][0],\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, String.fromCharCode(symbolsMap[this.props.marking][1])));\n  }\n\n} //Game3\n\n\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711]\n};\nvar patterns = [//horizontal\n[0, 1, 2], [3, 4, 5], [6, 7, 8], //vertical\n[0, 3, 6], [1, 4, 7], [2, 5, 8], //diagonal\n[0, 4, 8], [2, 4, 6]];\nvar AIScore = {\n  2: 1,\n  0: 2,\n  1: 0\n};\n\nclass Game3 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true,\n      mode: \"AI\"\n    };\n    this.handleNewMove = this.handleNewMove.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.handleModeChange = this.handleModeChange.bind(this);\n    this.processBoard = this.processBoard.bind(this);\n    this.makeAIMove = this.makeAIMove.bind(this);\n  }\n\n  processBoard() {\n    var won = false;\n    patterns.forEach(pattern => {\n      var firstMark = this.state.boardState[pattern[0]];\n\n      if (firstMark != 2) {\n        var marks = this.state.boardState.filter((mark, index) => {\n          return pattern.includes(index) && mark == firstMark; //looks for marks matching the first in pattern's index\n        });\n\n        if (marks.length == 3) {\n          document.querySelector(\"#message1\").innerHTML = String.fromCharCode(symbolsMap[marks[0]][1]) + \" wins!\";\n          document.querySelector(\"#message1\").style.display = \"block\";\n          pattern.forEach(index => {\n            var id = index + \"-\" + firstMark;\n            document.getElementById(id).parentNode.style.background = \"#d4edda\";\n          });\n          this.setState({\n            active: false\n          });\n          won = true;\n        }\n      }\n    });\n\n    if (!this.state.boardState.includes(2) && !won) {\n      document.querySelector(\"#message2\").innerHTML = \"Game Over - It's a draw\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      this.setState({\n        active: false\n      });\n    } else if (this.state.mode == \"AI\" && this.state.turn == 1 && !won) {\n      this.makeAIMove();\n    }\n  }\n\n  makeAIMove() {\n    var emptys = [];\n    var scores = [];\n    this.state.boardState.forEach((mark, index) => {\n      if (mark == 2) emptys.push(index);\n    });\n    emptys.forEach(index => {\n      var score = 0;\n      patterns.forEach(pattern => {\n        if (pattern.includes(index)) {\n          var xCount = 0;\n          var oCount = 0;\n          pattern.forEach(p => {\n            if (this.state.boardState[p] == 0) xCount += 1;else if (this.state.boardState[p] == 1) oCount += 1;\n            score += p == index ? 0 : AIScore[this.state.boardState[p]];\n          });\n          if (xCount >= 2) score += 10;\n          if (oCount >= 2) score += 20;\n        }\n      });\n      scores.push(score);\n    });\n    var maxIndex = 0;\n    scores.reduce(function (maxVal, currentVal, currentIndex) {\n      if (currentVal >= maxVal) {\n        maxIndex = currentIndex;\n        return currentVal;\n      }\n\n      return maxVal;\n    });\n    this.handleNewMove(emptys[maxIndex]);\n  }\n\n  handleReset(e) {\n    if (e) e.preventDefault();\n    document.querySelectorAll(\".alert\").forEach(el => el.style.display = \"none\");\n    this.setState({\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true\n    });\n  }\n\n  handleNewMove(id) {\n    this.setState(prevState => {\n      return {\n        boardState: prevState.boardState.slice(0, id).concat(prevState.turn).concat(prevState.boardState.slice(id + 1)),\n        turn: (prevState.turn + 1) % 2\n      };\n    }, () => {\n      this.processBoard();\n    });\n  }\n\n  handleModeChange(e) {\n    e.preventDefault();\n\n    if (e.target.getAttribute(\"href\").includes(\"AI\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#twop\").style.background = \"none\";\n      this.setState({\n        mode: \"AI\"\n      });\n      this.handleReset(null);\n    } else if (e.target.getAttribute(\"href\").includes(\"2P\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#ai\").style.background = \"none\";\n      this.setState({\n        mode: \"2P\"\n      });\n      this.handleReset(null);\n    }\n  }\n\n  render() {\n    const rows = [];\n\n    for (var i = 0; i < 3; i++) rows.push( /*#__PURE__*/React.createElement(Row, {\n      row: i,\n      boardState: this.state.boardState,\n      onNewMove: this.handleNewMove,\n      active: this.state.active,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }\n    }));\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container jumbotron\",\n      id: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, \"TIC TAC TOE\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"./?AI\",\n      onClick: this.handleModeChange,\n      id: \"ai\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, \"Versus AI\"), \" \", \"||\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"./?2P\",\n      onClick: this.handleModeChange,\n      id: \"twop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }, \" \", \"2 Players\"), \" \", \"||\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, \" \", \"Reset board\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, String.fromCharCode(symbolsMap[this.state.turn][1]), \"'s turn\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }, rows), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"alert alert-success\",\n      role: \"alert\",\n      id: \"message1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"alert alert-info\",\n      role: \"alert\",\n      id: \"message2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default Game3;","map":{"version":3,"sources":["/Users/jangsher/Documents/GitHub/tables/mytable/src/Game3.js"],"names":["React","component","Row","Component","constructor","props","render","cols","i","id","row","marking","boardState","push","onNewMove","active","symbolsMap","Column","handleNewMove","bind","e","document","querySelector","style","display","innerHTML","parseInt","target","String","fromCharCode","patterns","AIScore","Game3","state","Array","fill","turn","mode","handleReset","handleModeChange","processBoard","makeAIMove","won","forEach","pattern","firstMark","marks","filter","mark","index","includes","length","getElementById","parentNode","background","setState","emptys","scores","score","xCount","oCount","p","maxIndex","reduce","maxVal","currentVal","currentIndex","preventDefault","querySelectorAll","el","prevState","slice","concat","getAttribute","rows"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;AACA;AACA;AACA;;AACA,MAAMC,GAAN,SAAkBF,KAAK,CAACG,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAMC,IAAI,GAAG,EAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,UAAIC,EAAE,GAAG,KAAKJ,KAAL,CAAWK,GAAX,GAAiB,CAAjB,GAAqBF,CAA9B;AACA,UAAIG,OAAO,GAAG,KAAKN,KAAL,CAAWO,UAAX,CAAsBH,EAAtB,CAAd;AACAF,MAAAA,IAAI,CAACM,IAAL,eACE,oBAAC,MAAD;AACE,QAAA,GAAG,EAAEJ,EAAE,GAAG,GAAL,GAAWE,OADlB;AAEE,QAAA,EAAE,EAAEF,EAAE,GAAG,GAAL,GAAWE,OAFjB;AAGE,QAAA,OAAO,EAAEA,OAHX;AAIE,QAAA,SAAS,EAAE,KAAKN,KAAL,CAAWS,SAJxB;AAKE,QAAA,MAAM,EAAE,KAAKT,KAAL,CAAWU,MALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASD;;AACD,wBAAO;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6BR,IAA7B,CAAP;AACD;;AArB+B,C,CAuBlC;;;AACA,IAAIS,UAAU,GAAG;AACf,KAAG,CAAC,SAAD,EAAY,IAAZ,CADY;AAEf,KAAG,CAAC,mBAAD,EAAsB,IAAtB,CAFY;AAGf,KAAG,CAAC,mBAAD,EAAsB,IAAtB;AAHY,CAAjB;;AAMA,MAAMC,MAAN,SAAqBjB,KAAK,CAACG,SAA3B,CAAqC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKa,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACD;;AAEDD,EAAAA,aAAa,CAACE,CAAD,EAAI;AACf,QAAI,CAAC,KAAKf,KAAL,CAAWU,MAAhB,EAAwB;AACtBM,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCG,SAApC,GACE,wDADF;AAEAJ,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACA,aAAO,KAAP;AACD,KAND,MAMO,IAAI,KAAKnB,KAAL,CAAWM,OAAX,IAAsB,CAA1B,EACL,KAAKN,KAAL,CAAWS,SAAX,CAAqBY,QAAQ,CAACN,CAAC,CAACO,MAAF,CAASlB,EAAV,CAA7B;AACH;;AAEDH,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,OAAO,EAAE,KAAKY,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAEF,UAAU,CAAC,KAAKX,KAAL,CAAWM,OAAZ,CAAV,CAA+B,CAA/B,CAAZ;AAA+C,MAAA,EAAE,EAAE,KAAKN,KAAL,CAAWI,EAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGmB,MAAM,CAACC,YAAP,CAAoBb,UAAU,CAAC,KAAKX,KAAL,CAAWM,OAAZ,CAAV,CAA+B,CAA/B,CAApB,CADH,CADF,CADF;AAOD;;AAzBkC,C,CA2BrC;;;AACA,IAAIK,UAAU,GAAG;AACf,KAAG,CAAC,SAAD,EAAY,IAAZ,CADY;AAEf,KAAG,CAAC,mBAAD,EAAsB,IAAtB,CAFY;AAGf,KAAG,CAAC,mBAAD,EAAsB,IAAtB;AAHY,CAAjB;AAMA,IAAIc,QAAQ,GAAG,CACb;AACA,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFa,EAGb,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHa,EAIb,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAJa,EAKb;AACA,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CANa,EAOb,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAPa,EAQb,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CARa,EASb;AACA,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAVa,EAWb,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAXa,CAAf;AAcA,IAAIC,OAAO,GAAG;AAAE,KAAG,CAAL;AAAQ,KAAG,CAAX;AAAc,KAAG;AAAjB,CAAd;;AAEA,MAAMC,KAAN,SAAoBhC,KAAK,CAACG,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAK4B,KAAL,GAAa;AACXrB,MAAAA,UAAU,EAAE,IAAIsB,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,CAAlB,CADD;AAEXC,MAAAA,IAAI,EAAE,CAFK;AAGXrB,MAAAA,MAAM,EAAE,IAHG;AAIXsB,MAAAA,IAAI,EAAE;AAJK,KAAb;AAMA,SAAKnB,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKmB,WAAL,GAAmB,KAAKA,WAAL,CAAiBnB,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKoB,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBpB,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKqB,YAAL,GAAoB,KAAKA,YAAL,CAAkBrB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKsB,UAAL,GAAkB,KAAKA,UAAL,CAAgBtB,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDqB,EAAAA,YAAY,GAAG;AACb,QAAIE,GAAG,GAAG,KAAV;AACAZ,IAAAA,QAAQ,CAACa,OAAT,CAAkBC,OAAD,IAAa;AAC5B,UAAIC,SAAS,GAAG,KAAKZ,KAAL,CAAWrB,UAAX,CAAsBgC,OAAO,CAAC,CAAD,CAA7B,CAAhB;;AAEA,UAAIC,SAAS,IAAI,CAAjB,EAAoB;AAClB,YAAIC,KAAK,GAAG,KAAKb,KAAL,CAAWrB,UAAX,CAAsBmC,MAAtB,CAA6B,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACxD,iBAAOL,OAAO,CAACM,QAAR,CAAiBD,KAAjB,KAA2BD,IAAI,IAAIH,SAA1C,CADwD,CACH;AACtD,SAFW,CAAZ;;AAIA,YAAIC,KAAK,CAACK,MAAN,IAAgB,CAApB,EAAuB;AACrB9B,UAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCG,SAApC,GACEG,MAAM,CAACC,YAAP,CAAoBb,UAAU,CAAC8B,KAAK,CAAC,CAAD,CAAN,CAAV,CAAqB,CAArB,CAApB,IAA+C,QADjD;AAEAzB,UAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACAoB,UAAAA,OAAO,CAACD,OAAR,CAAiBM,KAAD,IAAW;AACzB,gBAAIxC,EAAE,GAAGwC,KAAK,GAAG,GAAR,GAAcJ,SAAvB;AACAxB,YAAAA,QAAQ,CAAC+B,cAAT,CAAwB3C,EAAxB,EAA4B4C,UAA5B,CAAuC9B,KAAvC,CAA6C+B,UAA7C,GAA0D,SAA1D;AACD,WAHD;AAIA,eAAKC,QAAL,CAAc;AAAExC,YAAAA,MAAM,EAAE;AAAV,WAAd;AACA2B,UAAAA,GAAG,GAAG,IAAN;AACD;AACF;AACF,KApBD;;AAsBA,QAAI,CAAC,KAAKT,KAAL,CAAWrB,UAAX,CAAsBsC,QAAtB,CAA+B,CAA/B,CAAD,IAAsC,CAACR,GAA3C,EAAgD;AAC9CrB,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCG,SAApC,GAAgD,yBAAhD;AACAJ,MAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACA,WAAK+B,QAAL,CAAc;AAAExC,QAAAA,MAAM,EAAE;AAAV,OAAd;AACD,KAJD,MAIO,IAAI,KAAKkB,KAAL,CAAWI,IAAX,IAAmB,IAAnB,IAA2B,KAAKJ,KAAL,CAAWG,IAAX,IAAmB,CAA9C,IAAmD,CAACM,GAAxD,EAA6D;AAClE,WAAKD,UAAL;AACD;AACF;;AAEDA,EAAAA,UAAU,GAAG;AACX,QAAIe,MAAM,GAAG,EAAb;AACA,QAAIC,MAAM,GAAG,EAAb;AACA,SAAKxB,KAAL,CAAWrB,UAAX,CAAsB+B,OAAtB,CAA8B,CAACK,IAAD,EAAOC,KAAP,KAAiB;AAC7C,UAAID,IAAI,IAAI,CAAZ,EAAeQ,MAAM,CAAC3C,IAAP,CAAYoC,KAAZ;AAChB,KAFD;AAIAO,IAAAA,MAAM,CAACb,OAAP,CAAgBM,KAAD,IAAW;AACxB,UAAIS,KAAK,GAAG,CAAZ;AACA5B,MAAAA,QAAQ,CAACa,OAAT,CAAkBC,OAAD,IAAa;AAC5B,YAAIA,OAAO,CAACM,QAAR,CAAiBD,KAAjB,CAAJ,EAA6B;AAC3B,cAAIU,MAAM,GAAG,CAAb;AACA,cAAIC,MAAM,GAAG,CAAb;AACAhB,UAAAA,OAAO,CAACD,OAAR,CAAiBkB,CAAD,IAAO;AACrB,gBAAI,KAAK5B,KAAL,CAAWrB,UAAX,CAAsBiD,CAAtB,KAA4B,CAAhC,EAAmCF,MAAM,IAAI,CAAV,CAAnC,KACK,IAAI,KAAK1B,KAAL,CAAWrB,UAAX,CAAsBiD,CAAtB,KAA4B,CAAhC,EAAmCD,MAAM,IAAI,CAAV;AACxCF,YAAAA,KAAK,IAAIG,CAAC,IAAIZ,KAAL,GAAa,CAAb,GAAiBlB,OAAO,CAAC,KAAKE,KAAL,CAAWrB,UAAX,CAAsBiD,CAAtB,CAAD,CAAjC;AACD,WAJD;AAKA,cAAIF,MAAM,IAAI,CAAd,EAAiBD,KAAK,IAAI,EAAT;AACjB,cAAIE,MAAM,IAAI,CAAd,EAAiBF,KAAK,IAAI,EAAT;AAClB;AACF,OAZD;AAaAD,MAAAA,MAAM,CAAC5C,IAAP,CAAY6C,KAAZ;AACD,KAhBD;AAkBA,QAAII,QAAQ,GAAG,CAAf;AACAL,IAAAA,MAAM,CAACM,MAAP,CAAc,UAAUC,MAAV,EAAkBC,UAAlB,EAA8BC,YAA9B,EAA4C;AACxD,UAAID,UAAU,IAAID,MAAlB,EAA0B;AACxBF,QAAAA,QAAQ,GAAGI,YAAX;AACA,eAAOD,UAAP;AACD;;AACD,aAAOD,MAAP;AACD,KAND;AAOA,SAAK9C,aAAL,CAAmBsC,MAAM,CAACM,QAAD,CAAzB;AACD;;AAEDxB,EAAAA,WAAW,CAAClB,CAAD,EAAI;AACb,QAAIA,CAAJ,EAAOA,CAAC,CAAC+C,cAAF;AACP9C,IAAAA,QAAQ,CACL+C,gBADH,CACoB,QADpB,EAEGzB,OAFH,CAEY0B,EAAD,IAASA,EAAE,CAAC9C,KAAH,CAASC,OAAT,GAAmB,MAFvC;AAGA,SAAK+B,QAAL,CAAc;AACZ3C,MAAAA,UAAU,EAAE,IAAIsB,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,CAAlB,CADA;AAEZC,MAAAA,IAAI,EAAE,CAFM;AAGZrB,MAAAA,MAAM,EAAE;AAHI,KAAd;AAKD;;AACDG,EAAAA,aAAa,CAACT,EAAD,EAAK;AAChB,SAAK8C,QAAL,CACGe,SAAD,IAAe;AACb,aAAO;AACL1D,QAAAA,UAAU,EAAE0D,SAAS,CAAC1D,UAAV,CACT2D,KADS,CACH,CADG,EACA9D,EADA,EAET+D,MAFS,CAEFF,SAAS,CAAClC,IAFR,EAGToC,MAHS,CAGFF,SAAS,CAAC1D,UAAV,CAAqB2D,KAArB,CAA2B9D,EAAE,GAAG,CAAhC,CAHE,CADP;AAKL2B,QAAAA,IAAI,EAAE,CAACkC,SAAS,CAAClC,IAAV,GAAiB,CAAlB,IAAuB;AALxB,OAAP;AAOD,KATH,EAUE,MAAM;AACJ,WAAKI,YAAL;AACD,KAZH;AAcD;;AAEDD,EAAAA,gBAAgB,CAACnB,CAAD,EAAI;AAClBA,IAAAA,CAAC,CAAC+C,cAAF;;AACA,QAAI/C,CAAC,CAACO,MAAF,CAAS8C,YAAT,CAAsB,MAAtB,EAA8BvB,QAA9B,CAAuC,IAAvC,CAAJ,EAAkD;AAChD9B,MAAAA,CAAC,CAACO,MAAF,CAASJ,KAAT,CAAe+B,UAAf,GAA4B,SAA5B;AACAjC,MAAAA,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCC,KAAhC,CAAsC+B,UAAtC,GAAmD,MAAnD;AACA,WAAKC,QAAL,CAAc;AAAElB,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,WAAKC,WAAL,CAAiB,IAAjB;AACD,KALD,MAKO,IAAIlB,CAAC,CAACO,MAAF,CAAS8C,YAAT,CAAsB,MAAtB,EAA8BvB,QAA9B,CAAuC,IAAvC,CAAJ,EAAkD;AACvD9B,MAAAA,CAAC,CAACO,MAAF,CAASJ,KAAT,CAAe+B,UAAf,GAA4B,SAA5B;AACAjC,MAAAA,QAAQ,CAACC,aAAT,CAAuB,KAAvB,EAA8BC,KAA9B,CAAoC+B,UAApC,GAAiD,MAAjD;AACA,WAAKC,QAAL,CAAc;AAAElB,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,WAAKC,WAAL,CAAiB,IAAjB;AACD;AACF;;AAEDhC,EAAAA,MAAM,GAAG;AACP,UAAMoE,IAAI,GAAG,EAAb;;AACA,SAAK,IAAIlE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EACEkE,IAAI,CAAC7D,IAAL,eACE,oBAAC,GAAD;AACE,MAAA,GAAG,EAAEL,CADP;AAEE,MAAA,UAAU,EAAE,KAAKyB,KAAL,CAAWrB,UAFzB;AAGE,MAAA,SAAS,EAAE,KAAKM,aAHlB;AAIE,MAAA,MAAM,EAAE,KAAKe,KAAL,CAAWlB,MAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;;AAQF,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,qBAAX;AAAiC,MAAA,EAAE,EAAC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAC,OAAR;AAAgB,MAAA,OAAO,EAAE,KAAKwB,gBAA9B;AAAgD,MAAA,EAAE,EAAC,IAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAGO,GAHP,qBAKE;AAAG,MAAA,IAAI,EAAC,OAAR;AAAgB,MAAA,OAAO,EAAE,KAAKA,gBAA9B;AAAgD,MAAA,EAAE,EAAC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,cALF,EAQO,GARP,qBAUE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAY,MAAA,OAAO,EAAE,KAAKD,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,gBAVF,CAFF,eAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIV,MAAM,CAACC,YAAP,CAAoBb,UAAU,CAAC,KAAKiB,KAAL,CAAWG,IAAZ,CAAV,CAA4B,CAA5B,CAApB,CAAJ,YAjBF,eAkBE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBsC,IAAzB,CAlBF,eAmBE;AAAG,MAAA,KAAK,EAAC,qBAAT;AAA+B,MAAA,IAAI,EAAC,OAApC;AAA4C,MAAA,EAAE,EAAC,UAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnBF,eAoBE;AAAG,MAAA,KAAK,EAAC,kBAAT;AAA4B,MAAA,IAAI,EAAC,OAAjC;AAAyC,MAAA,EAAE,EAAC,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,CADF,CADF;AA0BD;;AArKiC;;AAwKpC,eAAe1C,KAAf","sourcesContent":["import React, { component } from \"react\";\n//import \"bootstrap/dist/css/bootstrap.css\";\n//import Row from \"./Row\";\n//import \"./App.css\";\n//Row\nclass Row extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const cols = [];\n    for (var i = 0; i < 3; i++) {\n      var id = this.props.row * 3 + i;\n      var marking = this.props.boardState[id];\n      cols.push(\n        <Column\n          key={id + \"-\" + marking}\n          id={id + \"-\" + marking}\n          marking={marking}\n          onNewMove={this.props.onNewMove}\n          active={this.props.active}\n        />\n      );\n    }\n    return <div className=\"border-row\">{cols}</div>;\n  }\n}\n//Column\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711],\n};\n\nclass Column extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleNewMove = this.handleNewMove.bind(this);\n  }\n\n  handleNewMove(e) {\n    if (!this.props.active) {\n      document.querySelector(\"#message1\").style.display = \"none\";\n      document.querySelector(\"#message2\").innerHTML =\n        \"Game is already over! Reset if you want to play again.\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      return false;\n    } else if (this.props.marking == 2)\n      this.props.onNewMove(parseInt(e.target.id));\n  }\n\n  render() {\n    return (\n      <div className=\"game\" onClick={this.handleNewMove}>\n        <div class={symbolsMap[this.props.marking][0]} id={this.props.id}>\n          {String.fromCharCode(symbolsMap[this.props.marking][1])}\n        </div>\n      </div>\n    );\n  }\n}\n//Game3\nvar symbolsMap = {\n  2: [\"marking\", \"32\"],\n  0: [\"marking marking-x\", 9587],\n  1: [\"marking marking-o\", 9711],\n};\n\nvar patterns = [\n  //horizontal\n  [0, 1, 2],\n  [3, 4, 5],\n  [6, 7, 8],\n  //vertical\n  [0, 3, 6],\n  [1, 4, 7],\n  [2, 5, 8],\n  //diagonal\n  [0, 4, 8],\n  [2, 4, 6],\n];\n\nvar AIScore = { 2: 1, 0: 2, 1: 0 };\n\nclass Game3 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true,\n      mode: \"AI\",\n    };\n    this.handleNewMove = this.handleNewMove.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.handleModeChange = this.handleModeChange.bind(this);\n    this.processBoard = this.processBoard.bind(this);\n    this.makeAIMove = this.makeAIMove.bind(this);\n  }\n\n  processBoard() {\n    var won = false;\n    patterns.forEach((pattern) => {\n      var firstMark = this.state.boardState[pattern[0]];\n\n      if (firstMark != 2) {\n        var marks = this.state.boardState.filter((mark, index) => {\n          return pattern.includes(index) && mark == firstMark; //looks for marks matching the first in pattern's index\n        });\n\n        if (marks.length == 3) {\n          document.querySelector(\"#message1\").innerHTML =\n            String.fromCharCode(symbolsMap[marks[0]][1]) + \" wins!\";\n          document.querySelector(\"#message1\").style.display = \"block\";\n          pattern.forEach((index) => {\n            var id = index + \"-\" + firstMark;\n            document.getElementById(id).parentNode.style.background = \"#d4edda\";\n          });\n          this.setState({ active: false });\n          won = true;\n        }\n      }\n    });\n\n    if (!this.state.boardState.includes(2) && !won) {\n      document.querySelector(\"#message2\").innerHTML = \"Game Over - It's a draw\";\n      document.querySelector(\"#message2\").style.display = \"block\";\n      this.setState({ active: false });\n    } else if (this.state.mode == \"AI\" && this.state.turn == 1 && !won) {\n      this.makeAIMove();\n    }\n  }\n\n  makeAIMove() {\n    var emptys = [];\n    var scores = [];\n    this.state.boardState.forEach((mark, index) => {\n      if (mark == 2) emptys.push(index);\n    });\n\n    emptys.forEach((index) => {\n      var score = 0;\n      patterns.forEach((pattern) => {\n        if (pattern.includes(index)) {\n          var xCount = 0;\n          var oCount = 0;\n          pattern.forEach((p) => {\n            if (this.state.boardState[p] == 0) xCount += 1;\n            else if (this.state.boardState[p] == 1) oCount += 1;\n            score += p == index ? 0 : AIScore[this.state.boardState[p]];\n          });\n          if (xCount >= 2) score += 10;\n          if (oCount >= 2) score += 20;\n        }\n      });\n      scores.push(score);\n    });\n\n    var maxIndex = 0;\n    scores.reduce(function (maxVal, currentVal, currentIndex) {\n      if (currentVal >= maxVal) {\n        maxIndex = currentIndex;\n        return currentVal;\n      }\n      return maxVal;\n    });\n    this.handleNewMove(emptys[maxIndex]);\n  }\n\n  handleReset(e) {\n    if (e) e.preventDefault();\n    document\n      .querySelectorAll(\".alert\")\n      .forEach((el) => (el.style.display = \"none\"));\n    this.setState({\n      boardState: new Array(9).fill(2),\n      turn: 0,\n      active: true,\n    });\n  }\n  handleNewMove(id) {\n    this.setState(\n      (prevState) => {\n        return {\n          boardState: prevState.boardState\n            .slice(0, id)\n            .concat(prevState.turn)\n            .concat(prevState.boardState.slice(id + 1)),\n          turn: (prevState.turn + 1) % 2,\n        };\n      },\n      () => {\n        this.processBoard();\n      }\n    );\n  }\n\n  handleModeChange(e) {\n    e.preventDefault();\n    if (e.target.getAttribute(\"href\").includes(\"AI\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#twop\").style.background = \"none\";\n      this.setState({ mode: \"AI\" });\n      this.handleReset(null);\n    } else if (e.target.getAttribute(\"href\").includes(\"2P\")) {\n      e.target.style.background = \"#d4edda\";\n      document.querySelector(\"#ai\").style.background = \"none\";\n      this.setState({ mode: \"2P\" });\n      this.handleReset(null);\n    }\n  }\n\n  render() {\n    const rows = [];\n    for (var i = 0; i < 3; i++)\n      rows.push(\n        <Row\n          row={i}\n          boardState={this.state.boardState}\n          onNewMove={this.handleNewMove}\n          active={this.state.active}\n        />\n      );\n    return (\n      <div>\n        <div class=\"container jumbotron\" id=\"container\">\n          <h3>TIC TAC TOE</h3>\n          <p>\n            <a href=\"./?AI\" onClick={this.handleModeChange} id=\"ai\">\n              Versus AI\n            </a>{\" \"}\n            ||\n            <a href=\"./?2P\" onClick={this.handleModeChange} id=\"twop\">\n              {\" \"}\n              2 Players\n            </a>{\" \"}\n            ||\n            <a href=\"#\" onClick={this.handleReset}>\n              {\" \"}\n              Reset board\n            </a>\n          </p>\n          <p>{String.fromCharCode(symbolsMap[this.state.turn][1])}'s turn</p>\n          <div className=\"status\">{rows}</div>\n          <p class=\"alert alert-success\" role=\"alert\" id=\"message1\"></p>\n          <p class=\"alert alert-info\" role=\"alert\" id=\"message2\"></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Game3;\n"]},"metadata":{},"sourceType":"module"}